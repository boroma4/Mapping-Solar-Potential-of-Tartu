<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>
      Cities in 3D
    </title>
    <link rel="stylesheet" href="https://js.arcgis.com/4.21//esri/themes/light/main.css" />
    <script src="https://js.arcgis.com/4.21//"></script>

    <style>
      html,
      body,
      #viewDiv {
        padding: 0;
        margin: 0;
        height: 100%;
        width: 100%;
      }
      .buttons {
        position: absolute;
        bottom: 20px;
        left: 0;
        right: 0;
        text-align: center;

      }
      .esri-button {
        display: inline;
        background-color: white;
        min-width: 200px;
        max-width: 300px;
      }
    </style>

    <script>
      require([
  "esri/config",
  "esri/Map",
  "esri/views/SceneView",
  "esri/layers/SceneLayer",
  "esri/layers/FeatureLayer"
],(esriConfig, Map, SceneView, SceneLayer, FeatureLayer)=> {

  esriConfig.apiKey = "AAPK88c0984f621a4610b07a98c91c0c9ca4X3sMulN1b9KVbo10GQl1HslmAh-Pp8cd2rzOssyv8P-UYHptODrR3QZVfxmYHX9r";


  const buildings3DObjects = new SceneLayer({
    url:"https://tiles.arcgis.com/tiles/upRofNY4KeMMXce2/arcgis/rest/services/Tartu2/SceneServer",
    renderer: {
      type: "simple",
      symbol: {
        type: "mesh-3d",
        symbolLayers: [
          {
            type: "fill",
            material: {
              color: [255, 237, 204],
              colorMixMode: "replace"
            },
            edges: {
              type: "solid",
              color: [133, 108, 62, 0.5],
              size: 1
            }
          }
        ]
      }
    }
  });


  // Create Map
  const map = new Map({
    basemap: "arcgis-light-gray",
    ground: "world-elevation",
    layers: [buildings3DObjects]
  });

  // Create the SceneView
  const view = new SceneView({
    container: "viewDiv",
    map: map,
    camera: {
      position: {
        latitude: 58.37,
        longitude: 26.73,
        z: 50000  // altitude in meters
      },
      heading: 356.82,
      tilt: 78.61
    },
    qualityProfile: "high"
  });

  document.getElementById("building").addEventListener("click",(event)=> {
    buildings3DObjects.renderer = {
      type: "simple",
      symbol: {
        type: "mesh-3d",
        symbolLayers: [
          {
            type: "fill",
            material: {
              color: [255, 237, 204],
              colorMixMode: "replace"
            },
            edges: {
              type: "solid",
              color: [133, 108, 62, 0.5],
              size: 1
            }
          }
        ]
      }
    }
  });
  document.getElementById("textured").addEventListener("click",(event)=> {
    buildings3DObjects.renderer = null;
  });
});

    </script>
  </head>

  <body>
    <div id="viewDiv"></div>
    <div class="buttons">
      <button id="building" class="esri-button esri-button--secondary esri-button--half">Untextured 3D buildings</button>
      <button id="textured" class="esri-button esri-button--secondary esri-button--half">Textured 3D buildings</button>
    </div>
  </body>
</html>